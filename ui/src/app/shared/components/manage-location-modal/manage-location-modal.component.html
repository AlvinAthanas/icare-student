<!-- {{ dialogData | json }} -->

<div class="p-3">
  <div class="h4 text-left">Add new location</div>
  <div class="loading-overlay" *ngIf="saving">
    <div class="text-center">
      <div>Saving location details...</div>
      <div class="mt-3 d-flex justify-content-center w-100">
        <mat-spinner diameter="50" strokeWidth="2"></mat-spinner>
      </div>
    </div>
  </div>
  <div class="location-form" *ngIf="!saving">
    <div class="mt-2">
      <app-form
        [fields]="locationFields"
        (formUpdate)="onFormUpdate($event)"
      ></app-form>
    </div>
    <div class="ml-2 mr-2">
      <div class="row">
        <div class="col-6">
          <div class="h6">Service</div>
          <div>
            <app-form
              [fields]="[serviceConceptsField]"
              (formUpdate)="onFormUpdateForServices($event)"
            ></app-form>
          </div>
        </div>
        <div class="col-6">
          <div class="h6">Forms</div>
          <div>
            <app-form
              [fields]="[formsField]"
              (formUpdate)="onFormUpdateForForm($event)"
            ></app-form>
          </div>
        </div>
      </div>
    </div>

    <div class="ml-2 mr-2">
      <div class="h5">Location Tags</div>
      <section style="height: 150px; overflow: auto">
        <mat-checkbox
          class="mr-2"
          color="primary"
          style="font-size: 0.8rem"
          [disabled]="tag?.uuid === dialogData?.locationTag?.uuid"
          [checked]="tag?.uuid === dialogData?.locationTag?.uuid"
          (change)="getSelectedValue($event, tag?.uuid)"
          *ngFor="let tag of dialogData?.locationTags"
          >{{ tag?.display }}</mat-checkbox
        >
      </section>
    </div>
  </div>
  <div class="mt-2 d-flex justify-content-end" *ngIf="!saving">
    <button mat-stroked-button (click)="onCancel($event)">Cancel</button>
    <button
      mat-stroked-button
      class="ml-2"
      color="primary"
      [disabled]="!isFormValid"
      (click)="onSave($event)"
    >
      Save
    </button>
  </div>
</div>
