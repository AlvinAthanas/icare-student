<div
  *ngIf="{
    cabinets: cabinetsUnderCurrentLocation$ | async,
    loadingVisit: loadingVisit$ | async,
    currentLocation: currentLocation$ | async,
    deathRegistryEncounterTypeUuid: deathRegistryEncounterTypeUuid$ | async
  } as params"
>
  <!-- <mat-progress-bar
    *ngIf="params?.loadingVisit || params?.deathRegistryEncounterTypeUuid"
    mode="indeterminate"
  ></mat-progress-bar> -->
  <div
    class="mt-5 d-flex justify-content-center w-100"
    *ngIf="params?.loadingVisit || !params?.deathRegistryEncounterTypeUuid"
  >
    <mat-spinner color="primary" diameter="80" strokeWidth="4"></mat-spinner>
  </div>

  <div *ngIf="params?.cabinets && params?.deathRegistryEncounterTypeUuid">
    <mat-tab-group mat-align-tabs="start" dynamicHeight="true">
      <mat-tab label="Patients">
        <div class="centered-container-patient-list">
          <div class="w-100 text-centered">
            <div class="text-muted h6 mb-4 text-center">
              Search for a patient
            </div>
            <app-patient-list
              [encounterType]="params?.deathRegistryEncounterTypeUuid"
              (selectPatient)="onSelectPatient($event)"
              [shouldShowParentLocation]="true"
              [isTabularList]="true"
            ></app-patient-list>
          </div>
        </div>
      </mat-tab>
      <mat-tab label="Cabinets">
        <div class="p-3">
          <app-cabinets-list
            [currentLocation]="currentLocation"
          ></app-cabinets-list>
        </div>
      </mat-tab>
    </mat-tab-group>
  </div>
</div>
