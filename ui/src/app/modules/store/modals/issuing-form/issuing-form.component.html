<div
  *ngIf="{
    stockStatusOfTheItemOnRequestedStore:
      stockStatusOfTheItemOnRequestedStore$ | async,
    stockStatusOfTheItemOnRequestingStore:
      stockStatusOfTheItemOnRequestingStore$ | async
  } as params"
>
  <mat-toolbar color="primary">Issuing Form</mat-toolbar>
  <!-- {{ params?.stockStatusOfTheItemOnRequestedStore | json }} -->
  <div class="p-3">
    <h3>
      Available on <b>{{ data?.issue?.requestingLocation?.name }}</b> :
      <b>{{
        params?.stockStatusOfTheItemOnRequestingStore?.eligibleQuantity
      }}</b>
    </h3>
    <hr />
    <div class="requisition-form">
      <app-form
        [fields]="issueFormFields"
        (formUpdate)="onUpdateForm($event)"
      ></app-form>
      <div
        *ngIf="
          params?.stockStatusOfTheItemOnRequestedStore?.eligibleQuantity === 0
        "
        class="alert alert-warning"
        role="alert"
      >
        There is zero eligible stock for this item
      </div>
      <div
        *ngIf="
          quantityToIssue >
          params?.stockStatusOfTheItemOnRequestedStore?.eligibleQuantity
        "
        class="alert alert-warning"
        role="alert"
      >
        You can not issue than eligible quantity
      </div>
    </div>
    <div class="d-flex justify-content-end">
      <button mat-stroked-button (click)="onCancel($event)">Cancel</button>
      <button
        class="ml-2"
        color="primary"
        mat-flat-button
        [disabled]="
          !issuingFormValue?.isValid ||
          params?.stockStatusOfTheItemOnRequestedStore?.eligibleQuantity ===
            0 ||
          quantityToIssue >
            params?.stockStatusOfTheItemOnRequestedStore?.eligibleQuantity ||
          !isFormValid
        "
        (click)="onIssue($event)"
      >
        Issue
      </button>
    </div>
  </div>
</div>
