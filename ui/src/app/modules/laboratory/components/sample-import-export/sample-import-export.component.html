<div
  class="w-100"
  *ngIf="{
    exportTemplateDataReferences: exportTemplateDataReferences$ | async
  } as params"
>
  <mat-radio-group class="registration-category mb-2">
    <mat-radio-button
      (change)="getSelectionCategory($event)"
      class="action-category-btn"
      [value]="'IMPORT'"
      [checked]="actionCategory === 'IMPORT'"
      color="primary"
    >
      Import
    </mat-radio-button>
    <mat-radio-button
      (change)="getSelectionCategory($event)"
      class="action-category-btn ml-2"
      [value]="'EXPORT'"
      [checked]="actionCategory === 'EXPORT'"
      color="primary"
    >
      Export exisiting samples
    </mat-radio-button>
    <mat-radio-button
      (change)="getSelectionCategory($event)"
      class="action-category-btn ml-2"
      [value]="'TEMPLATE'"
      [checked]="actionCategory === 'TEMPLATE'"
      color="primary"
    >
      Export template
    </mat-radio-button>
  </mat-radio-group>
  <div class="w-100">
    <mat-progress-bar
      mode="indeterminate"
      *ngIf="!params?.exportTemplateDataReferences"
    ></mat-progress-bar>
  </div>
  <div class="w-100 mt-2" *ngIf="actionCategory">
    <div class="row">
      <div class="col-12" *ngIf="actionCategory === 'IMPORT'">
        <div class="w-100 file-selection">
          <input
            type="file"
            style="
              border: none;
              background-color: transparent;
              margin-left: -10px;
            "
            class="form-control"
            name="file"
            accept=".csv, .xls, .xlsx"
            id="fileSelector"
            (change)="fileSelection($event)"
          />
        </div>
        <div class="w-100" style="overflow: auto" *ngIf="exceltoJson?.filename">
          <table class="table table-bordered" id="samples-imported">
            <thead>
              <tr>
                <th rowspan="2" style="width: 40px">SN</th>
                <th
                  [attr.colspan]="rowOneItem?.colspan"
                  class="text-center"
                  *ngFor="let rowOneItem of formulatedHeaders?.rowOneItems"
                >
                  {{ rowOneItem?.name }}
                </th>
              </tr>
              <tr>
                <th *ngFor="let header of formulatedHeaders?.rowTwoItems">
                  {{ header?.exportKey }}
                </th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let sample of exceltoJson?.sheet1; let count = index">
                <td>
                  {{ count + 1 }}
                </td>
                <td *ngFor="let header of formulatedHeaders?.rowTwoItems">
                  {{ sample[header?.systemKey] }}
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="w-100 mt-2 d-flex justify-content-left">
          <button
            mat-flat-button
            color="primary"
            [disabled]="!file || !params?.exportTemplateDataReferences"
            (click)="onImport($event, params?.exportTemplateDataReferences)"
          >
            Import
          </button>
        </div>
      </div>
      <div class="col-12" *ngIf="actionCategory === 'EXPORT'">
        <div class="w-100">
          <app-samples-to-export
            [exportTemplateDataReferences]="
              params?.exportTemplateDataReferences
            "
          ></app-samples-to-export>
        </div>
        <div class="w-100 mt-2 d-flex justify-content-left">
          <button
            mat-flat-button
            color="primary"
            (click)="
              onExportDataToImportExportTemplate($event, 'samples-to-export')
            "
          >
            Export
          </button>
        </div>
      </div>
      <div class="col-12" *ngIf="actionCategory === 'TEMPLATE'">
        <div class="w-100" id="table-template">
          <app-sample-template-table
            [exportTemplateDataReferences]="
              params?.exportTemplateDataReferences
            "
          ></app-sample-template-table>
        </div>
        <div class="w-100 mt-2 d-flex justify-content-left">
          <button
            mat-flat-button
            [disabled]="!params?.exportTemplateDataReferences"
            color="primary"
            (click)="onDownloadTemplate($event, 'table-template')"
          >
            Download template
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
