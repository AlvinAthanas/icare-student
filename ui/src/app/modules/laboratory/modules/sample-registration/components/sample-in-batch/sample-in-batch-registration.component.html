<div
  class="single-registration"
  *ngIf="{
    labSampleLabel: labSampleLabel$ | async,
    testsUnderSpecimen: testsUnderSpecimen$ | async,
    labLocations: labLocations$ | async
  } as params"
>

  <div class="row">
    <div class="col-12" *ngIf="savingDataResponse?.error">
      <div *ngIf="savingDataResponse?.error?.error">
        <div
          class="alert alert-danger"
          *ngFor="
            let globalError of savingDataResponse?.error?.error?.globalErrors
          "
          role="alert"
        >
          {{ globalError?.message }}
        </div>
      </div>
      <div *ngIf="savingDataResponse?.fieldErrors?.activeAttributes">
        <div
          class="alert alert-danger"
          *ngFor="
            let activeAttribute of savingDataResponse?.fieldErrors
              ?.activeAttributes
          "
          role="alert"
        >
          {{ activeAttribute?.message }}
        </div>
      </div>
    </div>
    <div *ngIf="errorMessage" class="col-12 ml-2 mr-2">
      <div class="alert alert-danger" role="alert">
        {{ errorMessage }}
      </div>
    </div>

    <!-- <div class="col-12" *ngIf="savingData">
      <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    </div> -->
    <div class="loading-overlay" *ngIf="savingData">
      <div class="text-center">
        <div>Saving sample...</div>
        <div class="mt-3 d-flex justify-content-center w-100">
          <mat-spinner diameter="50" strokeWidth="2"></mat-spinner>
        </div>
      </div>
    </div>
    <div class="col-12 d-flex justify-content-end mt-2 mb-2">
      <button
        mat-flat-button
        color="primary"
        [disabled]="
          errorMessage ||
          !broughtOnTimeValid ||
          !receivedOnTimeValid ||
          !collectedOnTimeValid
        "
        class="ml-2"
        (click)="onSave($event, false,  params?.labLocations)"
      >
        Save Samples
      </button>
    </div>
  </div>
</div>
