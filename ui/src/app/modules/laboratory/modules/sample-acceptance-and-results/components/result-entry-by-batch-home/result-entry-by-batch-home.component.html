<div
  class="w-100 mt-3"
  *ngIf="{
    worksheetDefinitions: worksheetDefinitions$ | async,
    multipleResultsAttributeType: multipleResultsAttributeType$ | async,
    batchsets: batchsets$ | async,
    batches: batches$ | async
  } as params"
>
  <mat-progress-bar mode="indeterminate"
    *ngIf="filteringBatches || !(params?.batchsets && params?.batches)">
  </mat-progress-bar>
  <div class="row" *ngIf="params?.batchsets && params?.batches">
    <div class="d-flex">
      <div class="w-50">
        <app-form 
          [fields]="[batchsetsField]"
          (formUpdate)="onFormUpdate($event, 'batchset')"
          >
        </app-form>
      </div>
      <div class="w-50" *ngIf="!filteringBatches">
        <app-form 
          [fields]="[batchesField]"
          (formUpdate)="onFormUpdate($event, 'batch')"
          >
        </app-form>
      </div>
    </div>
  </div>
  <mat-progress-bar
    mode="indeterminate"
    *ngIf="
      !params?.worksheetDefinitions || !params?.multipleResultsAttributeType
    "
  ></mat-progress-bar>
  <app-result-entry-by-worksheet
    *ngIf="params?.worksheetDefinitions && params?.multipleResultsAttributeType"
    [worksheetDefinitions]="params?.worksheetDefinitions"
    [isLIS]="isLIS"
    [viewType]="viewType"
    [conceptNameType]="conceptNameType"
    [multipleResultsAttributeType]="params?.multipleResultsAttributeType"
  ></app-result-entry-by-worksheet>
</div>
