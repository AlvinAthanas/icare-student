<div class="w-100 p-2">
  <table>
    <tbody
      class="table"
      *ngIf="
        finalResultsForParentTestParameter &&
        finalResultsForParentTestParameter?.length > 0
      "
    >
      <tr>
        <td *ngFor="let result of finalResultsForParentTestParameter">
          <div class="w-100 mb-2">
            {{ result?.valueCoded?.display }}
          </div>
          <div class="w-100">
            <table class="table table-responsive">
              <tr *ngFor="let allocation of parametersWithDefinedRelationship">
                <td>
                  <!-- {{ allocation?.formattedAllocation?.finalResult | json }} -->
                  <app-test-parameter-entry
                    [parameterUuid]="allocation?.parameter?.uuid"
                    [allocation]="allocation"
                    [isLIS]="isLIS"
                    [relatedResult]="result"
                    [disabled]="disabled"
                    [finalResult]="allocation?.formattedAllocation?.finalResult"
                    [conceptNameType]="conceptNameType"
                    (data)="getFedResult($event, result, allocation)"
                  ></app-test-parameter-entry>
                </td>
              </tr>
            </table>
          </div>
        </td>
      </tr>
    </tbody>
    <tbody>
      <tr>
        <td>
          <!-- {{ allocation?.formattedAllocation?.finalResult | json }} -->
          <div
            class="row"
            *ngIf="
              (
                allocationsWithoutRelationShip
                | identifyParametersWithoutHeaders
              )?.length > 0
            "
          >
            <div
              class="col-2"
              *ngFor="
                let allocation of allocationsWithoutRelationShip
                  | identifyParametersWithoutHeaders
              "
            >
              <app-test-parameter-entry
                [parameterUuid]="allocation?.parameter?.uuid"
                [allocation]="allocation"
                [isLIS]="isLIS"
                [relatedResult]="result"
                [disabled]="disabled"
                [finalResult]="allocation?.formattedAllocation?.finalResult"
                [conceptNameType]="conceptNameType"
                (data)="getFedResult($event, result, allocation)"
              ></app-test-parameter-entry>
            </div>
          </div>

          <div
            class="row"
            *ngIf="
              (allocationsWithoutRelationShip | groupParametersByHeaders)
                ?.length > 0
            "
          >
            <div
              class="col-2"
              *ngFor="
                let header of allocationsWithoutRelationShip
                  | groupParametersByHeaders
              "
            >
              <div>
                <div class="h5 text-muted">
                  {{ header?.display }}
                </div>
                <div
                  class="w-100 mt-2"
                  *ngFor="let allocation of header?.allocations"
                >
                  <app-test-parameter-entry
                    [parameterUuid]="allocation?.parameter?.uuid"
                    [allocation]="allocation"
                    [isLIS]="isLIS"
                    [relatedResult]="result"
                    [disabled]="disabled"
                    [finalResult]="allocation?.formattedAllocation?.finalResult"
                    [conceptNameType]="conceptNameType"
                    (data)="getFedResult($event, result, allocation)"
                  ></app-test-parameter-entry>
                </div>
              </div>
            </div>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
  <div
    class="alert alert-warning"
    role="alert"
    *ngIf="
      !finalResultsForParentTestParameter ||
      (finalResultsForParentTestParameter &&
        finalResultsForParentTestParameter?.length == 0)
    "
  >
    No results fed on related result parameter
  </div>
</div>
